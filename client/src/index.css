@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ==================== THEME SYSTEM ==================== */

/* Ocean Theme */
.ocean {
  --ocean-primary: #006994;
  --ocean-secondary: #00b4d8;
  --ocean-accent: #90e0ef;
  --ocean-bg: #023e8a;
  --ocean-surface: #0077b6;
  --ocean-text: #caf0f8;
}

.ocean body {
  background: linear-gradient(135deg, #023e8a 0%, #0077b6 100%);
  color: var(--ocean-text);
}

.ocean .bg-white {
  background: linear-gradient(135deg, rgba(0, 119, 182, 0.9) 0%, rgba(0, 180, 216, 0.8) 100%) !important;
  backdrop-filter: blur(10px);
}

.ocean .card, .ocean .bg-white.rounded-xl, .ocean .bg-white.rounded-3xl {
  background: linear-gradient(135deg, rgba(0, 119, 182, 0.8) 0%, rgba(0, 180, 216, 0.7) 100%) !important;
  border: 1px solid rgba(144, 224, 239, 0.3);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  backdrop-filter: blur(10px);
}

.ocean .text-gray-900,
.ocean .text-gray-800,
.ocean .text-gray-700 {
  color: var(--ocean-text) !important;
}

.ocean .bg-gray-100,
.ocean .bg-gray-200 {
  background: rgba(0, 180, 216, 0.3) !important;
}

.ocean .border-gray-200,
.ocean .border-gray-300 {
  border-color: rgba(144, 224, 239, 0.3) !important;
}

.ocean nav {
  background: linear-gradient(135deg, rgba(2, 62, 138, 0.95) 0%, rgba(0, 119, 182, 0.9) 100%) !important;
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(144, 224, 239, 0.3);
}

/* Forest Theme */
.forest {
  --forest-primary: #1b4332;
  --forest-secondary: #2d6a4f;
  --forest-accent: #52b788;
  --forest-bg: #1b4332;
  --forest-surface: #2d6a4f;
  --forest-text: #d8f3dc;
}

.forest body {
  background: linear-gradient(135deg, #1b4332 0%, #2d6a4f 100%);
  color: var(--forest-text);
}

.forest .bg-white {
  background: linear-gradient(135deg, rgba(45, 106, 79, 0.9) 0%, rgba(82, 183, 136, 0.8) 100%) !important;
  backdrop-filter: blur(10px);
}

.forest .card, .forest .bg-white.rounded-xl, .forest .bg-white.rounded-3xl {
  background: linear-gradient(135deg, rgba(45, 106, 79, 0.8) 0%, rgba(82, 183, 136, 0.7) 100%) !important;
  border: 1px solid rgba(82, 183, 136, 0.3);
  backdrop-filter: blur(10px);
}

.forest .text-gray-900,
.forest .text-gray-800,
.forest .text-gray-700 {
  color: var(--forest-text) !important;
}

.forest nav {
  background: linear-gradient(135deg, rgba(27, 67, 50, 0.95) 0%, rgba(45, 106, 79, 0.9) 100%) !important;
  backdrop-filter: blur(10px);
}

/* Sunset Theme */
.sunset {
  --sunset-primary: #fb5607;
  --sunset-secondary: #ff006e;
  --sunset-accent: #ffbe0b;
  --sunset-bg: #d62828;
  --sunset-surface: #fb5607;
  --sunset-text: #fff3e0;
}

.sunset body {
  background: linear-gradient(135deg, #d62828 0%, #fb5607 50%, #ff006e 100%);
  color: var(--sunset-text);
}

.sunset .bg-white {
  background: linear-gradient(135deg, rgba(251, 86, 7, 0.9) 0%, rgba(255, 0, 110, 0.8) 100%) !important;
  backdrop-filter: blur(10px);
}

.sunset .card, .sunset .bg-white.rounded-xl, .sunset .bg-white.rounded-3xl {
  background: linear-gradient(135deg, rgba(251, 86, 7, 0.8) 0%, rgba(255, 0, 110, 0.7) 100%) !important;
  border: 1px solid rgba(255, 190, 11, 0.3);
  backdrop-filter: blur(10px);
}

.sunset .text-gray-900,
.sunset .text-gray-800,
.sunset .text-gray-700 {
  color: var(--sunset-text) !important;
}

.sunset nav {
  background: linear-gradient(135deg, rgba(214, 40, 40, 0.95) 0%, rgba(251, 86, 7, 0.9) 100%) !important;
  backdrop-filter: blur(10px);
}

/* Minimal Theme */
.minimal {
  --minimal-bg: #f8f9fa;
  --minimal-surface: #e9ecef;
  --minimal-text: #495057;
}

.minimal body {
  background: #f8f9fa;
  color: var(--minimal-text);
}

.minimal .bg-white {
  background: #ffffff !important;
  border: 1px solid #e9ecef;
}

.minimal .card, .minimal .bg-white.rounded-xl, .minimal .bg-white.rounded-3xl {
  background: #ffffff !important;
  border: 1px solid #e9ecef;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.minimal nav {
  background: #ffffff !important;
  border-bottom: 1px solid #e9ecef;
}

/* Matrix Theme */
.matrix {
  --matrix-primary: #00ff41;
  --matrix-bg: #0d1117;
  --matrix-surface: #1a1e26;
  --matrix-text: #00ff41;
}

.matrix body {
  background: #0d1117;
  color: var(--matrix-text);
}

.matrix .bg-white {
  background: rgba(26, 30, 38, 0.95) !important;
  border: 1px solid rgba(0, 255, 65, 0.3);
  backdrop-filter: blur(10px);
}

.matrix .card, .matrix .bg-white.rounded-xl, .matrix .bg-white.rounded-3xl {
  background: rgba(26, 30, 38, 0.9) !important;
  border: 1px solid rgba(0, 255, 65, 0.3);
  box-shadow: 0 0 20px rgba(0, 255, 65, 0.2);
}

.matrix .text-gray-900,
.matrix .text-gray-800,
.matrix .text-gray-700 {
  color: var(--matrix-text) !important;
}

.matrix nav {
  background: rgba(13, 17, 23, 0.98) !important;
  border-bottom: 1px solid rgba(0, 255, 65, 0.3);
}

/* Neon Theme */
.neon {
  --neon-primary: #5a189a;
  --neon-secondary: #9d4edd;
  --neon-accent: #c77dff;
  --neon-bg: #2b0548;
  --neon-text: #e0aaff;
}

.neon body {
  background: linear-gradient(135deg, #2b0548 0%, #5a189a 100%);
  color: var(--neon-text);
}

.neon .bg-white {
  background: linear-gradient(135deg, rgba(90, 24, 154, 0.9) 0%, rgba(157, 78, 221, 0.8) 100%) !important;
  backdrop-filter: blur(10px);
}

.neon .card, .neon .bg-white.rounded-xl, .neon .bg-white.rounded-3xl {
  background: linear-gradient(135deg, rgba(90, 24, 154, 0.8) 0%, rgba(157, 78, 221, 0.7) 100%) !important;
  border: 1px solid rgba(199, 125, 255, 0.3);
  backdrop-filter: blur(10px);
  box-shadow: 0 0 20px rgba(199, 125, 255, 0.3);
}

.neon .text-gray-900,
.neon .text-gray-800,
.neon .text-gray-700 {
  color: var(--neon-text) !important;
}

.neon nav {
  background: linear-gradient(135deg, rgba(43, 5, 72, 0.95) 0%, rgba(90, 24, 154, 0.9) 100%) !important;
  backdrop-filter: blur(10px);
}

/* Grey Theme */
.grey {
  --grey-primary: #495057;
  --grey-secondary: #6c757d;
  --grey-accent: #adb5bd;
  --grey-bg: #343a40;
  --grey-text: #f8f9fa;
}

.grey body {
  background: linear-gradient(135deg, #343a40 0%, #495057 100%);
  color: var(--grey-text);
}

.grey .bg-white {
  background: linear-gradient(135deg, rgba(73, 80, 87, 0.9) 0%, rgba(108, 117, 125, 0.8) 100%) !important;
  backdrop-filter: blur(10px);
}

.grey .card, .grey .bg-white.rounded-xl, .grey .bg-white.rounded-3xl {
  background: linear-gradient(135deg, rgba(73, 80, 87, 0.8) 0%, rgba(108, 117, 125, 0.7) 100%) !important;
  border: 1px solid rgba(173, 181, 189, 0.3);
  backdrop-filter: blur(10px);
}

.grey .text-gray-900,
.grey .text-gray-800,
.grey .text-gray-700 {
  color: var(--grey-text) !important;
}

.grey nav {
  background: linear-gradient(135deg, rgba(52, 58, 64, 0.95) 0%, rgba(73, 80, 87, 0.9) 100%) !important;
  backdrop-filter: blur(10px);
}

/* ==================== END THEME SYSTEM ==================== */

body {
  margin: 0;
  padding: 0;
  min-width: 320px;
  min-height: 100vh;
  box-sizing: border-box;
}

#root {
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

@media (max-width: 1024px) {
  .card {
    padding: 1.5rem;
  }
}

@media (max-width: 768px) {
  .card {
    padding: 1rem;
    box-shadow: none;
    border-radius: 0.5rem;
  }
  .btn-primary, .btn-secondary {
    width: 100%;
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }
  #root {
    padding: 0.5rem;
  }
}

@media (max-width: 480px) {
  .card {
    padding: 0.5rem;
    font-size: 0.95rem;
  }
  h1, h2, h3 {
    font-size: 1.2rem;
  }
  #root {
    padding: 0.25rem;
  }
}

#root {
  width: 100%;
  min-height: 100vh;
}

@layer components {
  .btn-primary {
    @apply bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors;
  }
  
  .btn-secondary {
    @apply bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors;
  }
  
  .card {
    @apply bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6;
  }
}

/* AI Chat Message Formatting */
.prose {
  line-height: 1.6;
  word-wrap: break-word;
}

.prose strong {
  @apply font-bold text-gray-900 dark:text-white;
}

.prose em {
  @apply italic;
}

.prose code {
  @apply bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded text-sm font-mono;
  color: #9333ea; /* Purple for inline code */
}

.dark .prose code {
  color: #c084fc; /* Lighter purple for dark mode */
}

.prose pre {
  @apply bg-gray-800 text-gray-100 p-3 rounded-lg overflow-x-auto my-2;
  font-family: 'Courier New', monospace;
  font-size: 0.875rem;
  line-height: 1.5;
}

.prose pre code {
  background: transparent;
  padding: 0;
  color: inherit;
}

.prose ul {
  @apply list-disc my-2 space-y-1;
  padding-left: 1.5rem;
}

.prose ol {
  @apply list-decimal my-2 space-y-1;
  padding-left: 1.5rem;
}

.prose li {
  @apply ml-2;
  line-height: 1.6;
}

.prose p {
  @apply my-1;
}

.prose br {
  display: block;
  content: "";
  margin-top: 0.5rem;
}

.prose h1, .prose h2, .prose h3 {
  @apply font-bold mt-3 mb-2;
}

.prose h1 {
  @apply text-lg;
}

.prose h2 {
  @apply text-base;
}

.prose h3 {
  @apply text-sm;
}

/* ==================== AUTO TEXT CONTRAST SYSTEM ==================== */

/* Global text contrast for dark themes */
.ocean .text-gray-600,
.ocean .text-gray-500,
.ocean .text-gray-400,
.forest .text-gray-600,
.forest .text-gray-500,
.forest .text-gray-400,
.sunset .text-gray-600,
.sunset .text-gray-500,
.sunset .text-gray-400,
.matrix .text-gray-600,
.matrix .text-gray-500,
.matrix .text-gray-400,
.neon .text-gray-600,
.neon .text-gray-500,
.neon .text-gray-400,
.grey .text-gray-600,
.grey .text-gray-500,
.grey .text-gray-400 {
  color: rgba(255, 255, 255, 0.8) !important;
}

/* Button text contrast */
.ocean button,
.forest button,
.sunset button,
.matrix button,
.neon button,
.grey button {
  color: inherit;
}

/* Input fields for dark themes */
.ocean input,
.ocean textarea,
.ocean select,
.forest input,
.forest textarea,
.forest select,
.sunset input,
.sunset textarea,
.sunset select,
.matrix input,
.matrix textarea,
.matrix select,
.neon input,
.neon textarea,
.neon select {
  background: rgba(255, 255, 255, 0.1) !important;
  border-color: rgba(255, 255, 255, 0.2) !important;
  color: rgba(255, 255, 255, 0.9) !important;
}

.ocean input::placeholder,
.forest input::placeholder,
.sunset input::placeholder,
.matrix input::placeholder,
.neon input::placeholder {
  color: rgba(255, 255, 255, 0.5) !important;
}

/* Navbar text for all themes */
.ocean nav *,
.forest nav *,
.sunset nav *,
.matrix nav *,
.neon nav *,
.grey nav * {
  color: rgba(255, 255, 255, 0.95) !important;
}

/* Profile and XP badges */
.ocean .bg-amber-100,
.ocean .bg-yellow-100,
.forest .bg-amber-100,
.forest .bg-yellow-100,
.sunset .bg-amber-100,
.sunset .bg-yellow-100 {
  background: rgba(255, 255, 255, 0.2) !important;
}

.ocean .text-amber-800,
.ocean .text-yellow-800,
.forest .text-amber-800,
.forest .text-yellow-800,
.sunset .text-amber-800,
.sunset .text-yellow-800 {
  color: rgba(255, 255, 255, 0.95) !important;
}

/* Minimal theme specific (light background) */
.minimal .text-gray-900,
.minimal .text-gray-800,
.minimal .text-gray-700 {
  color: #495057 !important;
}

/* Ensure high contrast for links */
.ocean a,
.forest a,
.sunset a,
.matrix a,
.neon a,
.grey a {
  color: rgba(255, 255, 255, 0.9) !important;
}

.ocean a:hover,
.forest a:hover,
.sunset a:hover,
.matrix a:hover,
.neon a:hover,
.grey a:hover {
  color: rgba(255, 255, 255, 1) !important;
}

/* Task cards and modals */
.ocean .card *:not(button),
.forest .card *:not(button),
.sunset .card *:not(button),
.matrix .card *:not(button),
.neon .card *:not(button),
.grey .card *:not(button) {
  color: rgba(255, 255, 255, 0.9);
}

/* Headings in dark themes */
.ocean h1, .ocean h2, .ocean h3, .ocean h4, .ocean h5, .ocean h6,
.forest h1, .forest h2, .forest h3, .forest h4, .forest h5, .forest h6,
.sunset h1, .sunset h2, .sunset h3, .sunset h4, .sunset h5, .sunset h6,
.matrix h1, .matrix h2, .matrix h3, .matrix h4, .matrix h5, .matrix h6,
.neon h1, .neon h2, .neon h3, .neon h4, .neon h5, .neon h6,
.grey h1, .grey h2, .grey h3, .grey h4, .grey h5, .grey h6 {
  color: rgba(255, 255, 255, 0.95) !important;
}

/* Dropdown menus */
.ocean .dark\:bg-gray-800,
.forest .dark\:bg-gray-800,
.sunset .dark\:bg-gray-800 {
  background: rgba(0, 0, 0, 0.5) !important;
  backdrop-filter: blur(10px);
}

/* ==================== ACCESSIBILITY ENHANCEMENTS ==================== */

/* Focus states */
*:focus {
  outline: 2px solid currentColor;
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .ocean, .forest, .sunset, .matrix, .neon, .grey {
    --text-contrast: 1 !important;
  }
  
  .ocean *, .forest *, .sunset *, .matrix *, .neon *, .grey * {
    color: #ffffff !important;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Theme tweak: override Tailwind pink-600 color to requested rgb(180 39 119) */
.text-pink-600 { color: rgb(180 39 119) !important; }
.bg-pink-600 { background-color: rgb(180 39 119) !important; }
.hover\:bg-pink-600:hover { background-color: rgb(180 39 119) !important; }
.from-pink-600 { --tw-gradient-from: rgb(180 39 119); --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(180,39,119,0)); }
.to-pink-600 { --tw-gradient-to: rgb(180 39 119); }
.text-pink-600 { color: rgb(180 39 119) !important; }

/* Also provide a utility for theme text color usage */
.text-theme-pink { color: rgb(180 39 119) !important; }

